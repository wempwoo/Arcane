# Arcaionビルドシーン仕様書

## 概要

Arcaionビルドシーンは、プレイヤーがArcaion（魔導機）の装備を調整するためのインターフェースです。
探索シーンからいつでもアクセス可能で、所持している魔導回路から1つを選択し、宝珠を配置することができます。
Arcaionや魔導回路、宝珠の仕様については、magic_system.mdも参照してください。

## シーン構成

### 基本レイアウト

1. **ヘッダー部分**
   - 探索シーンへの戻るボタン
   - 現在のArcaionの名前
   - 設定保存ボタン

2. **メインビュー**
   - 左側：Arcaionのステータス表示
   - 中央：選択中の魔導回路と宝珠配置
   - 右側：所持回路リストと宝珠インベントリ

### Arcaionステータス表示（左側）

- **基本情報**
  - HP
  - マナ容量
  - マナ生成力
  - 装備中の魔導回路名

- **性能グラフ**
  - レーダーチャートで各種性能を可視化
  - 変更による性能の変化をリアルタイムプレビュー

### 魔導回路ビュー（中央）

- **回路の可視化**
  - 魔力の流れる方向の表示
  - 宝珠スロットの位置と接続の表現
  - 魔力の流れを示すアニメーション
    - 開始地点からの魔力伝達
    - 分岐がある場合の魔力分流

- **宝珠スロット**
  - ドラッグ&ドロップで宝珠を配置可能
  - スロットの状態表示
    - 空スロット：半透明のプレースホルダー
    - 装備済み：宝珠のアイコンと基本情報
  - 装備可能な宝珠の制限表示
    - マナ容量超過の場合は警告表示
    - 不適合スロットは赤枠表示

### 所持回路リストと宝珠インベントリ（右側）

- **所持回路リスト**
  - 入手済みの魔導回路一覧
  - 各回路の情報表示
    - 回路名
    - スロット数
    - 特徴的な構造（分岐の有無など）
    - サムネイル表示
  - 現在装備中の回路をハイライト
  - リスト表示形式
    - スクロール可能なリスト
    - 各回路のプレビュー表示

- **宝珠インベントリ**
  - グリッド表示形式
  - 各宝珠の基本情報
    - アイコン
    - 名前
    - 消費マナ量
    - 発動時間
    - 威力
    - 射程
  - フィルタリング機能
    - 消費マナ量順
    - 威力順
    - 発動時間順

- **詳細情報表示**
  - 選択中のアイテム（回路/宝珠）の詳細データ
  - 装備時のプレビュー機能
    - 性能への影響
    - マナ消費への影響

## インタラクション

### 基本操作

1. **回路選択**
   - 所持回路リストから回路を選択
   - 回路切り替え時の確認ダイアログ
     - 装備中の宝珠がある場合は警告
     - 宝珠の自動取り外し確認

2. **宝珠操作**
   - ドラッグ&ドロップによる装備/解除
   - スロット間の宝珠移動
   - 不適合な組み合わせの防止
     - マナ容量超過の警告
     - スロット制限の表示

3. **プレビュー機能**
   - 宝珠をスロットにホバーした際の性能変化表示
   - 回路全体の動作シミュレーション
     - マナの流れのアニメーション
     - 発動順序の可視化
     - 予想DPSの計算

### フィードバック

- **視覚的フィードバック**
  - 操作可能な要素のハイライト
  - ドラッグ中の宝珠の半透明化
  - 変更適用時のエフェクト
  - エラー状態の明確な表示

- **警告とエラー**
  - マナ容量超過警告
  - 不適切な宝珠配置の警告
  - 回路切り替え時の確認

## UI要素

### アニメーションとエフェクト

1. **魔力の流れ**
   - 回路に沿った魔力のパーティクル表現
   - 分岐点での魔力分流の視覚化
   - 宝珠発動時の輝きエフェクト

2. **操作フィードバック**
   - ドラッグ&ドロップ時の軌跡エフェクト
   - 装備/解除時の成功/失敗エフェクト
   - 警告時の点滅エフェクト

### 情報表示

1. **ツールチップ**
   - 各UI要素のヘルプ情報
   - 詳細なステータス情報
   - 操作ヒントの表示

2. **ステータス変化**
   - 変更前後の比較表示
   - 増減値の色分け表示
   - グラフによる視覚化